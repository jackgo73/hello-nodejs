---
title: 条件概率
date: 2017-10-19 20:47:20
categories: Statistics
tags: ml
---

> 转自维基百科:https://zh.wikipedia.org/wiki/%E6%9D%A1%E4%BB%B6%E6%A6%82%E7%8E%87

# 条件概率

本文定义了表征两个或者多个随机变量概率分布特点的术语。

- **条件概率**就是事件A在另外一个事件B已经发生条件下的发生概率。条件概率表示为$P(A\vert B)$，读作“在B条件下A的概率”。
- **联合概率**表示两个事件共同发生的概率。A与B的联合概率表示为$P(A\cap B)$或者$P(A,B)$或者$P(AB)$。
- **边缘概率**是某个事件发生的概率。边缘概率是这样得到的：在联合概率中，把最终结果中不需要的那些事件合并成其事件的全概率而消失（对离散随机变量用求和得全概率，对连续随机变量用积分得全概率）。这称为**边缘化（marginalization）**。A的边缘概率表示为$P(A)$，B的边缘概率表示为$P(B)$。

需要注意的是，在这些定义中A与B之间不一定有因果或者时间顺序关系。A可能会先于B发生，也可能相反，也可能二者同时发生。A可能会导致B的发生，也可能相反，也可能二者之间根本就没有因果关系。

例如考虑一些可能是新的信息的概率条件性可以通过贝叶斯定理实现。

## 定义

设 $A$ 与 $B$ 为样本空间$\Omega$中的两个事件，其中$P(B)>0$。那么在事件 $B$ 发生的条件下，事件$A$发生的条件概率为：
$$
P(A\vert B)={\frac {P(A\cap B)}{P(B)}}
$$
条件概率有时候也称为：后验概率。

## 统计独立性

当且仅当两个随机事件A与B满足

$P(A\cap B)=P(A)P(B)$

的时候，它们才是统计独立的，这样联合概率可以表示为各自概率的简单乘积。

同样，对于两个独立事件A与B有

$P(A\vert B)=P(A)$

以及

$P(B\vert A)=P(B)$

换句话说，如果A与B是相互独立的，那么A在B这个前提下的条件概率就是A自身的概率；同样，B在A的前提下的条件概率就是B自身的概率。

## 互斥性

当且仅当$A$与$B$满足

$P(A\cap B)=0$

且

$P(A)\neq 0,P(B)\neq 0$

的时候，$A$与$B$是互斥的。

因此，
$$
P(A\vert B)=0
P(B\vert A)=0
$$
换句话说，如果$B$已经发生，由于$A$不能和$B$在同一场合下发生，那么$A$发生的概率为零；同样，如果$A$已经发生，那么$B$发生的概率为零。

## 其它

- 如果事件$B$的概率$P(B)>0$，那么$Q(A)=P(A\vert B)$在所有事件$A$上所定义的函数$Q$就是概率测度。
- 如果$P(B)=0$，$P(A\vert B)$没有定义。
- 条件概率可以用决策树进行计算。

## 条件概率谬论

条件概率的谬论是假设$P(A\vert B)$大致等于$P(B\vert A)$。数学家John Allen Paulos在他的《数学盲》一书中指出医生、律师以及其他受过很好教育的非统计学家经常会犯这样的错误。这种错误可以通过用实数而不是概率来描述数据的方法来避免。

$P(A\vert B)$与$P(B\vert A)$的关系如下所示：
$$
P(B\vert A)=P(A\vert B) {\frac {P(B)}{P(A)}}
$$
下面是一个虚构但写实的例子，$P(A\vert B)$与$P(B\vert A)$的差距可能令人惊讶，同时也相当明显。


若想分辨某些个体是否有重大疾病，以便早期治疗，我们可能会对一大群人进行检验。虽然其益处明显可见，但同时，检验行为有一个地方引起争议，就是有检出假阳性的结果的可能：若有个未得疾病的人，却在初检时被误检为得病，他可能会感到苦恼烦闷，一直持续到更详细的检测显示他并未得病为止。而且就算在告知他其实是健康的人后，也可能因此对他的人生有负面影响。

**这个问题的重要性，最适合用条件概率的观点来解释。**

假设人群中有$1\%$的人罹患此疾病，而其他人是健康的。我们随机选出任一个体，并将患病以disease、健康以well表示：

$P(disease)=1\%=0.01,P(well)=99\%=0.99$

假设检验动作实施在未患病的人身上时，有1%的概率其结果为假阳性（阳性以positive表示）。意即：

$P(positive\vert well)=1\%$，而且$P(negative\vert well)=99\%$

最后，假设检验动作实施在患病的人身上时，有1%的概率其结果为假阴性（阴性以negative表示）。意即：

$P(negative\vert disease)=1\%$且$P(positive\vert disease)=99\%$

**计算可知**

$P(well\cap negative)=P(well)\times P(negative\vert well)=99\%\times 99\%=98.01\%$

是整群人中健康、且测定为阴性者的比率。

$P(disease\cap positive)=P(disease)\times P(positive\vert disease)=1\%\times 99\%=0.99\%$

是整群人中得病、且测定为阳性者的比率。

$P(well\cap positive)=P(well)\times P(positive\vert well)=99\%\times 1\%=0.99\%$

是整群人中被测定为假阳性者的比率。

$P(disease\cap negative)=P(disease)\times P(negative\vert disease)=1\%\times 1\%=0.01\%$

是整群人中被测定为假阴性者的比率。

**进一步得出**

$P(positive)=P(well\cap positive)+P(disease\cap positive)=0.99\%+0.99\%=1.98\%$

是整群人中被测出为阳性者的比率。

$P(disease\vert positive)={\frac{P(disease\cap positive)}{P(positive)}}={\frac{0.99\%}{1.98\%}}=50\%$

是某人被测出为阳性时，实际上真的得了病的概率。

**总结**

这个例子里面，我们很轻易可以看出$P(positive\vert disease)=99\%$与$P(disease\vert positive)=50\%$的差距：前者是你得了病，而被检出为阳性的条件概率；后者是你被检出为阳性，而你实际上真得了病的条件概率。由我们在本例中所选的数字，最终结果可能令人难以接受：被测定为阳性者，其中的半数实际上是假阳性。